{"ast":null,"code":"import _classCallCheck from\"/home/node/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/node/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/node/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/node/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/node/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _slicedToArray from\"/home/node/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import Card from\"react-bootstrap/Card\";import Button from\"react-bootstrap/Button\";import deleteMyData from\"../../api-functions/my-data/deleteMyData\";import Modal from\"react-bootstrap/Modal\";import Form from\"react-bootstrap/Form\";import updateMyData from\"../../api-functions/my-data/updateMyData\";import Image from\"react-bootstrap/Image\";import lock from'../../assets/lock.png';import Container from\"react-bootstrap/Container\";import Col from\"react-bootstrap/Col\";import Stack from'react-bootstrap/Stack';import Row from\"react-bootstrap/Row\";import\"../../css/PersonalDataCard.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UpdateModal(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),value=_useState4[0],setValue=_useState4[1];var handleChange=function handleChange(event){var valueNew=event.target.value;setValue(valueNew);};var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var handleSave=function handleSave(){updateMyData(props.person,props.header,value,props.oldValue,function(){props.refreshData();handleClose();});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",style:{float:\"right\"},onClick:handleShow,children:\"Edit\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Update \",props.header]})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicText\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\"New \",props.header]}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter New Value\",onChange:function onChange(event){return handleChange(event);}})]})})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSave,children:\"Save Changes\"})]})]})]});}function ShowSignature(props){var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:handleShow,children:/*#__PURE__*/_jsxs(Stack,{direction:\"horizontal\",gap:1,children:[/*#__PURE__*/_jsx(Image,{fluid:true,src:lock,style:{height:\"1rem\"}}),/*#__PURE__*/_jsx(Card.Subtitle,{className:\"text-muted\",children:props.keyPairName})]})}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[\"Signed By \",props.keyPairName,\" \"]})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Signature\"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"div\",{class:\"text-justify overflow-scroll\",children:props.signature})})]})})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){navigator.clipboard.writeText(props.signature);},children:\"Copy\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"})]})]})]});}var PersonalDataCard=/*#__PURE__*/function(_React$Component){_inherits(PersonalDataCard,_React$Component);var _super=_createSuper(PersonalDataCard);function PersonalDataCard(props){var _this;_classCallCheck(this,PersonalDataCard);_this=_super.call(this,props);_this.handleDelete=_this.handleDelete.bind(_assertThisInitialized(_this));return _this;}_createClass(PersonalDataCard,[{key:\"handleDelete\",value:function handleDelete(){var _this2=this;deleteMyData(this.props.person,this.props.header,this.props.value,function(){_this2.props.refreshData();});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Card,{className:\"card\",border:\"warning\",style:{width:'15rem',margin:\"1rem\"},children:[/*#__PURE__*/_jsx(Card.Header,{children:this.props.header}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:this.props.value}),/*#__PURE__*/_jsx(ShowSignature,{keyPairName:this.props.keyPairName,signature:this.props.signature}),/*#__PURE__*/_jsxs(Container,{style:{marginTop:\"1rem\"},children:[/*#__PURE__*/_jsx(Button,{variant:\"danger\",style:{float:\"left\"},onClick:function onClick(){return _this3.handleDelete();},children:\"Delete\"}),/*#__PURE__*/_jsx(UpdateModal,{person:this.props.person,header:this.props.header,oldValue:this.props.value,refreshData:this.props.refreshData})]})]})]})})})});}}]);return PersonalDataCard;}(React.Component);export default PersonalDataCard;","map":{"version":3,"names":["React","useState","Card","Button","deleteMyData","Modal","Form","updateMyData","Image","lock","Container","Col","Stack","Row","UpdateModal","props","show","setShow","value","setValue","handleChange","event","valueNew","target","handleClose","handleShow","handleSave","person","header","oldValue","refreshData","float","ShowSignature","height","keyPairName","signature","navigator","clipboard","writeText","PersonalDataCard","handleDelete","bind","width","margin","marginTop","Component"],"sources":["/home/node/pds-middleware/frontend/src/components/data-cards/PersonalDataCard.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Card from \"react-bootstrap/Card\"\nimport Button from \"react-bootstrap/Button\"\nimport deleteMyData from \"../../api-functions/my-data/deleteMyData\";\nimport Modal from \"react-bootstrap/Modal\"\nimport Form from \"react-bootstrap/Form\"\nimport updateMyData from \"../../api-functions/my-data/updateMyData\";\nimport Image from \"react-bootstrap/Image\"\nimport lock from '../../assets/lock.png';\nimport Container from \"react-bootstrap/Container\"\nimport Col from \"react-bootstrap/Col\"\nimport Stack from 'react-bootstrap/Stack';\nimport Row from \"react-bootstrap/Row\"\n\n\nimport \"../../css/PersonalDataCard.css\"\n\nfunction UpdateModal(props) {\n    const [show, setShow] = useState(false);\n    const [value, setValue] = useState(\"\")\n\n\n    const handleChange = (event) => {\n        const valueNew = event.target.value;\n        setValue(valueNew)\n    };\n\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n\n    const handleSave = () => {\n        updateMyData(props.person, props.header, value, props.oldValue, () => {\n            props.refreshData()\n            handleClose()\n        })\n    }\n\n\n\n\n    return (\n        <>\n            <Button variant=\"primary\" style={{ float: \"right\" }} onClick={handleShow}>\n                Edit\n            </Button>\n\n            <Modal show={show} onHide={handleClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Update {props.header}</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <Form>\n                        <Form.Group className=\"mb-3\" controlId=\"formBasicText\">\n                            <Form.Label>New {props.header}</Form.Label>\n                            <Form.Control type=\"text\" placeholder=\"Enter New Value\" onChange={(event) => handleChange(event)} />\n                        </Form.Group>\n                    </Form>\n\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={handleClose}>\n                        Close\n                    </Button>\n                    <Button variant=\"primary\" onClick={handleSave}>\n                        Save Changes\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    );\n}\n\n\n\nfunction ShowSignature(props) {\n    const [show, setShow] = useState(false);\n\n\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n    return (<>\n        <Button variant=\"light\" onClick={handleShow}>\n            <Stack direction=\"horizontal\" gap={1}>\n                <Image\n                    fluid={true}\n                    src={lock}\n                    style={{ height: \"1rem\" }}\n                ></Image>\n                <Card.Subtitle className=\"text-muted\">\n                    {props.keyPairName}\n                </Card.Subtitle>\n            </Stack>\n        </Button>\n\n\n        <Modal show={show} onHide={handleClose}>\n            <Modal.Header closeButton>\n                <Modal.Title>Signed By {props.keyPairName} </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Container>\n                    <Row>\n                        <Col>\n                            Signature\n                        </Col>\n                        <Col>\n                            <div class=\"text-justify overflow-scroll\">{props.signature}</div>\n                        </Col>\n                    </Row>\n                </Container>\n\n            </Modal.Body>\n            <Modal.Footer>\n                <Button onClick={() => { navigator.clipboard.writeText(props.signature) }}>Copy</Button>\n                <Button variant=\"secondary\" onClick={handleClose}>\n                    Close\n                </Button>\n            </Modal.Footer>\n        </Modal>\n    </>)\n\n}\n\nclass PersonalDataCard extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.handleDelete = this.handleDelete.bind(this)\n    }\n\n    handleDelete() {\n        deleteMyData(this.props.person, this.props.header, this.props.value, () => {\n            this.props.refreshData()\n        })\n    }\n\n    render() {\n        return (\n            <>\n                <Col >\n                    <div>\n                        <Card className=\"card\" border=\"warning\" style={{ width: '15rem', margin: \"1rem\" }}>\n                            <Card.Header>{this.props.header}</Card.Header>\n\n                            <Card.Body>\n                                <Card.Title>{this.props.value}</Card.Title>\n\n                                <ShowSignature keyPairName={this.props.keyPairName} signature={this.props.signature}></ ShowSignature>\n                                <Container style={{ marginTop: \"1rem\" }}>\n                                    <Button variant=\"danger\" style={{ float: \"left\" }} onClick={() => this.handleDelete()} >\n                                        Delete\n                                    </Button>\n                                    <UpdateModal person={this.props.person} header={this.props.header} oldValue={this.props.value} refreshData={this.props.refreshData}></UpdateModal>\n                                </Container>\n\n                            </Card.Body>\n                        </Card>\n                    </div>\n                </Col >\n\n            </>\n\n\n        )\n    }\n}\n\nexport default PersonalDataCard"],"mappings":"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"},"metadata":{},"sourceType":"module"}