{"ast":null,"code":"import _regeneratorRuntime from\"/home/ubuntu/Documents/Aries-storage/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ubuntu/Documents/Aries-storage/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/ubuntu/Documents/Aries-storage/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/ubuntu/Documents/Aries-storage/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/ubuntu/Documents/Aries-storage/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/ubuntu/Documents/Aries-storage/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/ubuntu/Documents/Aries-storage/pds-middleware/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import Container from\"react-bootstrap/Container\";import Navbar from\"react-bootstrap/Navbar\";import'../css/App.css';import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import Spinner from'react-bootstrap/Spinner';import readMyCerts from\"../api-functions/my-creds/readMyCerts\";import getPersonIRI from\"../api-functions/my-data/getPersonIRI\";import createNewUser from\"../api-functions/my-data/createNewUser\";import createNewRSAKeys from\"../api-functions/my-creds/createNewRSAKey\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Init=/*#__PURE__*/function(_React$Component){_inherits(Init,_React$Component);var _super=_createSuper(Init);function Init(props){var _this;_classCallCheck(this,Init);_this=_super.call(this,props);_this.state={personIRI:\"\",walletId:\"\",keyPairs:\"\"};_this.loadingWallet=_this.loadingWallet.bind(_assertThisInitialized(_this));return _this;}_createClass(Init,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var personIRI,certs,keyPairs;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPersonIRI().value;case 2:personIRI=_context.sent;_context.next=5;return readMyCerts();case 5:certs=_context.sent;console.log(personIRI);if(!(personIRI==null)){_context.next=14;break;}_context.next=10;return createNewUser();case 10:personIRI=_context.sent;this.setState({personIRI:newPersonIRI});_context.next=15;break;case 14:this.setState({personIRI:personIRI.value});case 15:if(!(certs.length==0)){_context.next=23;break;}console.log(this.state);_context.next=19;return createNewRSAKeys(this.state.personIRI,\"Self-Cert\",personIRI);case 19:keyPairs=_context.sent;// Need to make this passphrase more secure \nthis.setState({keyPairs:keyPairs});_context.next=24;break;case 23:this.setState({keyPairs:certs});case 24:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"loadingWallet\",value:function loadingWallet(){if(this.state.personIRI==\"\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"primary\"}),/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"secondary\"}),/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"success\"}),/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"danger\"}),/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"warning\"}),/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"info\"}),/*#__PURE__*/_jsx(Spinner,{animation:\"grow\",variant:\"dark\"})]});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\" Person IRI: \",this.state.personIRI]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Wallet ID: \",this.state.walletIdI]}),/*#__PURE__*/_jsx(Link,{to:{pathname:\"/wallet\",state:{\"Person\":this.state.personIRI}},className:\"btn btn-primary\",children:\"Go To Wallet\"})]});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{expand:\"lg\",bg:\"primary\",variant:\"dark\",children:/*#__PURE__*/_jsxs(Container,{className:\"navbar-top\",children:[/*#__PURE__*/_jsx(Navbar.Brand,{href:\"#home\",children:\"My Data\"}),/*#__PURE__*/_jsx(Navbar.Toggle,{}),/*#__PURE__*/_jsx(Navbar.Collapse,{className:\"justify-content-end\",children:/*#__PURE__*/_jsxs(Navbar.Text,{children:[\"Powered By: \",/*#__PURE__*/_jsx(\"a\",{href:\"https://github.com/I-AM-project\",children:\"IAM Project\"})]})})]})}),/*#__PURE__*/_jsx(Container,{style:{padding:\"2rem\"},fluid:true,children:/*#__PURE__*/_jsxs(Container,{className:\"data-box align-items-center justify-content-center\",style:{padding:\".5rem\"},children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\" Powering On Wallet\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:this.loadingWallet()})})]})})]});}}]);return Init;}(React.Component);export default Init;","map":{"version":3,"names":["React","Container","Navbar","Row","Col","Spinner","readMyCerts","getPersonIRI","createNewUser","createNewRSAKeys","Link","Init","props","state","personIRI","walletId","keyPairs","loadingWallet","bind","value","certs","console","log","setState","newPersonIRI","length","walletIdI","pathname","padding","Component"],"sources":["/home/ubuntu/Documents/Aries-storage/pds-middleware/frontend/src/pages/Init.jsx"],"sourcesContent":["import React from \"react\";\nimport Container from \"react-bootstrap/Container\"\nimport Navbar from \"react-bootstrap/Navbar\"\nimport '../css/App.css'\nimport Row from \"react-bootstrap/Row\"\nimport Col from \"react-bootstrap/Col\"\nimport Spinner from 'react-bootstrap/Spinner';\nimport readMyCerts from \"../api-functions/my-creds/readMyCerts\";\nimport getPersonIRI from \"../api-functions/my-data/getPersonIRI\";\nimport createNewUser from \"../api-functions/my-data/createNewUser\";\nimport createNewRSAKeys from \"../api-functions/my-creds/createNewRSAKey\";\nimport { Link } from \"react-router-dom\"\n\n\nclass Init extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            personIRI: \"\",\n            walletId: \"\",\n            keyPairs: \"\"\n        }\n        this.loadingWallet = this.loadingWallet.bind(this)\n    }\n    async componentDidMount() {\n        let personIRI = await getPersonIRI().value\n        let certs = await readMyCerts()\n        console.log(personIRI)\n        if (personIRI == null) {\n            personIRI = await createNewUser()\n            this.setState({ personIRI: newPersonIRI })\n        } else {\n            this.setState({ personIRI: personIRI.value })\n        }\n\n        if (certs.length == 0) {\n            console.log(this.state)\n            let keyPairs = await createNewRSAKeys(this.state.personIRI, \"Self-Cert\", personIRI) // Need to make this passphrase more secure \n            this.setState({ keyPairs: keyPairs })\n        } else {\n            this.setState({ keyPairs: certs })\n        }\n\n\n    }\n\n\n    loadingWallet() {\n        if (this.state.personIRI == \"\") {\n            return (\n                <>\n                    <Spinner animation=\"grow\" variant=\"primary\" />\n                    <Spinner animation=\"grow\" variant=\"secondary\" />\n                    <Spinner animation=\"grow\" variant=\"success\" />\n                    <Spinner animation=\"grow\" variant=\"danger\" />\n                    <Spinner animation=\"grow\" variant=\"warning\" />\n                    <Spinner animation=\"grow\" variant=\"info\" />\n                    <Spinner animation=\"grow\" variant=\"dark\" />\n                </>)\n        } else {\n            return (\n                <>\n\n                    <p> Person IRI: {this.state.personIRI}</p>\n                    <p> Wallet ID: {this.state.walletIdI}</p>\n\n                    <Link to={{\n                        pathname: \"/wallet\",\n                        state: { \"Person\": this.state.personIRI }\n                    }} className=\"btn btn-primary\">Go To Wallet</Link>\n\n                </>\n            )\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"App\" >\n                <Navbar expand=\"lg\" bg=\"primary\" variant=\"dark\" >\n                    <Container className=\"navbar-top\">\n                        <Navbar.Brand href=\"#home\">My Data</Navbar.Brand>\n                        <Navbar.Toggle />\n                        <Navbar.Collapse className=\"justify-content-end\">\n                            <Navbar.Text>\n                                Powered By: <a href=\"https://github.com/I-AM-project\">IAM Project</a>\n                            </Navbar.Text>\n\n                        </Navbar.Collapse>\n                    </Container>\n                </Navbar>\n                <Container style={{ padding: \"2rem\" }} fluid>\n                    <Container className=\"data-box align-items-center justify-content-center\" style={{ padding: \".5rem\" }}>\n                        <Row>\n                            <Col>\n                                <h1> Powering On Wallet</h1>\n                            </Col>\n                        </Row>\n                        <Row>\n                            <Col>\n                                {this.loadingWallet()}\n                            </Col>\n                        </Row>\n\n                    </Container>\n                </Container>\n            </div >\n        );\n    }\n}\n\n\n\n\nexport default Init"],"mappings":"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"},"metadata":{},"sourceType":"module"}